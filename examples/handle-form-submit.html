<!DOCTYPE>
<html>
<head>
  <meta charset="utf-8">
  <title>Example #03: handle form submit</title>
</head>
<body>
  <div class="Wrapper">
    <h1 class="MarginTop30">Example #03: handle form submit</h1>
    <form class="CheckoutForm">
      <input type="text" name="CardName" class="CardName" placeholder="Full name">
      <input type="text" name="CardNumber" class="CardNumber" placeholder="Card number">
      <input type="text" name="CardExpiry" class="CardExpiry" placeholder="MM / YYYY">
      <input type="text" name="CardSecurityCode" class="CardSecurityCode" placeholder="CVC">

      <button type="submit">Checkout</button>
    </form>

    <div id="result">Result... (please submit the checkout form to get a result)</div>
  </div>

  <div id="more" class="Wrapper">
    See more examples.
    <ul>
      <li><a href="./index.html">#01 Sample code</a></li>
      <li><a href="./verbose-methods.html">#02 Verbose methods</a></li>
      <li><a href="./handle-form-submit.html">#03 Handle form submit</a></li>
      <li><a href="./separate-year-month-fields.html">#03 Separate year and month fields</a></li>
    </ul>
  </div>
  <script src="../lib/js/validator.min.js"></script>
  <script>
    var omise = new OmiseValidator;

    omise.validates('.CardName', "ccName");
    omise.validates('.CardNumber', "ccNumber");
    omise.validates('.CardExpiry', "ccExpiry");
    omise.validates('.CardSecurityCode', "ccSecurityCode");

    omise.attachForm('.CheckoutForm',
      // Fail
      function(formObject) {
        console.log(formObject);

        var elem = document.getElementById('result');
            elem.innerHTML = "Result: FAILED!";
      },

      // Success
      function(formObject) {
        console.log(formObject);

        var elem = document.getElementById('result');
            elem.innerHTML = "Result: SUCCESS!";

        // Submit form
        window.setTimeout(function() {
          formObject.form.submit();
        }, 300);
      }
    );
  </script>

  <style>
    body { font-family: "Lato","Helvetica","Arial",sans-serif; margin: 0; padding: 0; }
    h1 { color: #444; font-size: 1.4em; }
    form { position: relative; margin-top: 20px;  border-radius: 3px; border: 1px solid #eee; padding: 16px; display: block; background-color: #f5f5f5; }
    input { width: 100%; padding: 8px; border: 1px solid #eaeaea; border-radius: 2px; display: block; margin-bottom: 5px; margin-top: 12px; height: 38px;}
    button { width: 30%; padding: 10px; background-color: #60C0E1; color: #fff; border: 0; cursor: pointer; margin-left: 70%; margin-top: 10px; }
    button:hover { background-color: #42A5C8; }

    .Wrapper { width: 400px; margin: auto; }
    .MarginTop30 { margin-top: 30px; }

    #omise_card_brand_supported { position: absolute; bottom: 22px; right: 33%; }
    #omise_card_brand_supported img { display: inline-block; padding-left: 5px; filter: gray; filter: grayscale(1); -webkit-filter: grayscale(1); }
    #omise_card_brand_supported img.match { filter: none; -webkit-filter: grayscale(0); }
    .omise_validation_msg { color: #d1002a; font-size: 75%; }

    #result { background: #eee; padding: 15px 10px 13px; font-size: 70%; color: #666; }

    #more { font-size: 85%; margin-top: 40px; }
    #more li { margin-bottom: 7px; }
    #more a { text-decoration: none; color: #60C0E1; }
  </style>
</body>
</html>
